<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TIMEMARK PRICING</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#0b1d3a,#4a00e0,#8e2de2);
  min-height:100vh;
  color:#fff;
}

.header{
  text-align:center;
  padding:30px 10px;
}

.container{
  max-width:900px;
  margin:auto;
  display:flex;
  gap:20px;
  flex-wrap:wrap;
  justify-content:center;
}

.card{
  width:260px;
  border-radius:18px;
  padding:22px;
  backdrop-filter:blur(16px);
  background:rgba(255,255,255,0.08);
  box-shadow:0 20px 40px rgba(0,0,0,.4);
  text-align:center;
  transition:.3s;
}
.card:hover{
  transform:translateY(-8px);
}

.basic{border:2px solid #00e676;}
.pro{border:2px solid #00b0ff;}
.premium{border:2px solid #ff00ff;}

h3{margin-top:0}

.price{
  font-size:18px;
  margin:10px 0;
  line-height:1.8;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  background:linear-gradient(135deg,#ff6a00,#ff9800);
  color:#fff;
}
button:hover{opacity:.9}

.footer{
  text-align:center;
  margin-top:30px;
  opacity:.7;
}
</style>
</head>

<body>

<div class="header">
  <h1>üöÄ TIMEMARK PREMIUM</h1>
  <p>Ch·ªçn g√≥i b·∫£n quy·ªÅn ph√π h·ª£p</p>
</div>

<div class="container">

  <div class="card basic">
    <h3>‚ö° 1 NG√ÄY</h3>
    <div class="price">39.000ƒë</div>
    <button onclick="buy('basic1')">MUA NGAY</button>
  </div>

  <div class="card basic">
    <h3>üå± 7 NG√ÄY</h3>
    <div class="price">199.000ƒë</div>
    <button onclick="buy('basic7')">MUA NGAY</button>
  </div>

  <div class="card pro">
    <h3>‚≠ê 1 TH√ÅNG</h3>
    <div class="price">699.000ƒë</div>
    <button onclick="buy('pro1')">MUA NGAY</button>
  </div>

  <div class="card pro">
    <h3>üî• 3 TH√ÅNG</h3>
    <div class="price">1.399.000ƒë</div>
    <button onclick="buy('pro3')">MUA NGAY</button>
  </div>

  <div class="card premium">
    <h3>üöÄ 6 TH√ÅNG</h3>
    <div class="price">2.199.000ƒë</div>
    <button onclick="buy('pre6')">MUA NGAY</button>
  </div>

  <div class="card premium">
    <h3>üíé Vƒ®NH VI·ªÑN</h3>
    <div class="price">2.999.000ƒë</div>
    <button onclick="buy('lifetime')">MUA NGAY</button>
  </div>

</div>


<div class="footer">
M·ªói key d√πng cho 1 thi·∫øt b·ªã
</div>

<script>
// ====== PRICE MAP THEO LOGIC APP HI·ªÜN T·∫†I ======
const priceMap = {
  basic1: 39000,
  basic7: 199000,
  pro1: 699000,
  pro3: 1399000,
  pre6: 2199000,
  lifetime: 2999000
};


/* =========================
   ‚≠ê CHECK LOCK BUY PAGE
========================= */

fetch("https://script.google.com/macros/s/AKfycbwDRIc7_SZC2nx1TlYRU-taklWN57lDF9aXLHt2LE3MrLDEu-7Q0inQQlvYd6MKplhw9Q/exec",{
  method:"POST",
  body:JSON.stringify({
    action:"checkLock"
  })
})
.then(r=>r.json())
.then(res=>{

  console.log("LOCK STATUS:",res);

  if(res.lock){

    document.querySelectorAll("button").forEach(btn=>{
      btn.disabled = true;
      btn.innerText = "üîí ƒêang c·∫≠p nh·∫≠t thanh to√°n";
      btn.style.opacity = "0.5";
      btn.style.cursor = "not-allowed";
    });

    document.getElementById("toastLock").style.display="block";
  }

});


function buy(plan){

  const email = prompt("Nh·∫≠p Gmail ƒë·ªÉ nh·∫≠n KEY:");

  if(!email){
    alert("B·∫°n ch∆∞a nh·∫≠p Gmail");
    return;
  }

  if(!email.includes("@")){
    alert("Email kh√¥ng h·ª£p l·ªá");
    return;
  }

  const price = priceMap[plan];

  // ‚≠ê FORMAT M·ªöI: 4 S·ªê NG·∫™U NHI√äN + TM + PLAN
  const orderId =
    Math.floor(1000 + Math.random()*9000) + "TM" + plan;

  const qrLink =
  "https://img.vietqr.io/image/970415-104882732682-compact2.png?amount="
  +price+
  "&addInfo="+encodeURIComponent(orderId)+
  "&accountName="+encodeURIComponent("TIMEMARK");

  const open = confirm(
    "Qu√©t QR ƒë·ªÉ thanh to√°n "+price.toLocaleString()+"ƒë\n\n"+
    "N·ªôi dung: "+orderId+"\n\n"+
    "Sau khi chuy·ªÉn kho·∫£n xong h·ªá th·ªëng s·∫Ω t·ª± g·ª≠i KEY qua email."
  );

  if(!open) return;

  window.open(qrLink,"_blank");

  // ‚≠ê L∆ØU EMAIL CH·ªú THANH TO√ÅN (ƒê·ªÇ SCRIPT T√åM)
  fetch("https://script.google.com/macros/s/AKfycbwDRIc7_SZC2nx1TlYRU-taklWN57lDF9aXLHt2LE3MrLDEu-7Q0inQQlvYd6MKplhw9Q/exec",{
    method:"POST",
    body:JSON.stringify({
      action:"createPayment",
      plan:"basic1", // ‚≠ê t·∫°o d√≤ng ch·ªù, plan th·∫≠t s·∫Ω ƒë∆∞·ª£c webhook ghi ƒë√®
      email:email
    })
  });

}



</script>
<div id="toastLock" style="
position:fixed;
top:20px;
left:50%;
transform:translateX(-50%);
background:rgba(0,0,0,0.85);
color:#fff;
padding:12px 18px;
border-radius:10px;
font-size:14px;
display:none;
z-index:9999;
backdrop-filter:blur(8px);
">
üîí Trang mua key ƒëang t·∫°m kh√≥a
</div>


</body>
</html>
